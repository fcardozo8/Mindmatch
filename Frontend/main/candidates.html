<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindMatch - Sube tu CV</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            margin-bottom: 30px;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 4px;
            background: #e2e8f0;
            z-index: 1;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            height: 4px;
            background: #667eea;
            z-index: 2;
            transition: width 0.3s ease;
            width: var(--progress-width, 33%);
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 3;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .step-circle.active {
            background: #667eea;
            color: white;
        }

        .step-circle.completed {
            background: #48bb78;
            color: white;
        }

        .step-label {
            font-size: 0.9em;
            color: #718096;
            text-align: center;
        }

        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .step-title {
            font-size: 1.8em;
            color: #2d3748;
            margin-bottom: 10px;
            text-align: center;
        }

        .step-subtitle {
            color: #718096;
            text-align: center;
            margin-bottom: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .form-input {
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-input.error {
            border-color: #e53e3e;
            box-shadow: 0 0 0 3px rgba(229, 62, 62, 0.1);
        }

        textarea.form-input {
            resize: vertical;
            min-height: 120px;
        }

        .file-upload-area {
            border: 3px dashed #cbd5e0;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: #f7fafc;
        }

        .file-upload-area:hover {
            border-color: #667eea;
            background: #edf2f7;
        }

        .file-upload-area.dragover {
            border-color: #667eea;
            background: #e6fffa;
        }

        .upload-icon {
            font-size: 3em;
            color: #a0aec0;
            margin-bottom: 15px;
        }

        .upload-text {
            color: #4a5568;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .upload-hint {
            color: #718096;
            font-size: 0.9em;
        }

        .file-info {
            display: none;
            background: #e6fffa;
            border: 2px solid #38b2ac;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            text-align: left;
        }

        .file-info.show {
            display: block;
        }

        .skills-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            min-height: 60px;
            background: white;
        }

        .skill-tag {
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .skill-tag .remove {
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1em;
        }

        .skills-container input {
            border: none;
            outline: none;
            flex: 1;
            min-width: 150px;
            padding: 8px;
            font-size: 1em;
        }

        .suggested-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }

        .suggested-skill {
            background: #f7fafc;
            color: #4a5568;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            cursor: pointer;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .suggested-skill:hover {
            background: #667eea;
            color: white;
        }

        .form-actions {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .summary-card {
            background: #f7fafc;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .summary-row:last-child {
            border-bottom: none;
        }

        .summary-label {
            font-weight: 600;
            color: #4a5568;
        }

        .summary-value {
            color: #2d3748;
        }

        .success-message {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .success-message.show {
            display: block;
        }

        .success-icon {
            font-size: 4em;
            color: #48bb78;
            margin-bottom: 20px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #e2e8f0;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .progress-bar {
                flex-direction: column;
                gap: 20px;
            }
            
            .progress-bar::before,
            .progress-bar::after {
                display: none;
            }
            
            .container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 MindMatch</h1>
            <p>Sube tu CV y conecta con las mejores oportunidades</p>
        </div>

        <div class="form-container">
            <!-- Barra de progreso -->
            <div class="progress-bar" style="--progress-width: 33%;">
                <div class="progress-step">
                    <div class="step-circle active">1</div>
                    <div class="step-label">Información Personal</div>
                </div>
                <div class="progress-step">
                    <div class="step-circle">2</div>
                    <div class="step-label">Experiencia y Habilidades</div>
                </div>
                <div class="progress-step">
                    <div class="step-circle">3</div>
                    <div class="step-label">Subir CV y Confirmar</div>
                </div>
            </div>

            <!-- Paso 1: Información Personal -->
            <div class="form-step active" id="step1">
                <h2 class="step-title">📝 Información Personal</h2>
                <p class="step-subtitle">Cuéntanos sobre ti para crear tu perfil</p>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="firstName">Nombre *</label>
                        <input type="text" id="firstName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Apellido *</label>
                        <input type="text" id="lastName" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Teléfono *</label>
                        <input type="tel" id="phone" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="location">Ubicación *</label>
                        <input type="text" id="location" class="form-input" placeholder="Ciudad, País" required>
                    </div>
                    <div class="form-group">
                        <label for="position">Posición Deseada *</label>
                        <select id="position" class="form-input" required>
                            <option value="">Selecciona una posición</option>
                            <option value="frontend">Frontend Developer</option>
                            <option value="backend">Backend Developer</option>
                            <option value="fullstack">Full Stack Developer</option>
                            <option value="mobile">Mobile Developer</option>
                            <option value="data">Data Scientist</option>
                            <option value="devops">DevOps Engineer</option>
                            <option value="qa">QA Engineer</option>
                            <option value="ux">UX/UI Designer</option>
                            <option value="pm">Product Manager</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label for="summary">Resumen Profesional</label>
                        <textarea id="summary" class="form-input" placeholder="Describe brevemente tu experiencia y objetivos profesionales..."></textarea>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" disabled>Anterior</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep(1)">Siguiente</button>
                </div>
            </div>

            <!-- Paso 2: Experiencia y Habilidades -->
            <div class="form-step" id="step2">
                <h2 class="step-title">💼 Experiencia y Habilidades</h2>
                <p class="step-subtitle">Detalla tu experiencia profesional y competencias técnicas</p>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="experience">Años de Experiencia *</label>
                        <select id="experience" class="form-input" required>
                            <option value="">Selecciona tu experiencia</option>
                            <option value="0-1">0-1 años (Junior)</option>
                            <option value="2-4">2-4 años (Semi-Senior)</option>
                            <option value="5-7">5-7 años (Senior)</option>
                            <option value="8+">8+ años (Lead/Architect)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="salary">Salario Esperado (USD/año)</label>
                        <select id="salary" class="form-input">
                            <option value="">Prefiero no especificar</option>
                            <option value="0-30000">$0 - $30,000</option>
                            <option value="30000-50000">$30,000 - $50,000</option>
                            <option value="50000-80000">$50,000 - $80,000</option>
                            <option value="80000-120000">$80,000 - $120,000</option>
                            <option value="120000+">$120,000+</option>
                        </select>
                    </div>
                </div>

                <div class="form-group full-width">
                    <label>Habilidades Técnicas *</label>
                    <div class="skills-container" id="skillsContainer">
                        <input type="text" id="skillInput" placeholder="Escribe una habilidad y presiona Enter">
                    </div>
                    <div class="suggested-skills">
                        <div class="suggested-skill" onclick="addSkill('JavaScript')">JavaScript</div>
                        <div class="suggested-skill" onclick="addSkill('Python')">Python</div>
                        <div class="suggested-skill" onclick="addSkill('React')">React</div>
                        <div class="suggested-skill" onclick="addSkill('Node.js')">Node.js</div>
                        <div class="suggested-skill" onclick="addSkill('SQL')">SQL</div>
                        <div class="suggested-skill" onclick="addSkill('Git')">Git</div>
                        <div class="suggested-skill" onclick="addSkill('Docker')">Docker</div>
                        <div class="suggested-skill" onclick="addSkill('AWS')">AWS</div>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group full-width">
                        <label for="education">Educación</label>
                        <textarea id="education" class="form-input" placeholder="Títulos, certificaciones, cursos relevantes..."></textarea>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="prevStep(2)">Anterior</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep(2)">Siguiente</button>
                </div>
            </div>

            <!-- Paso 3: Subir CV -->
            <div class="form-step" id="step3">
                <h2 class="step-title">📄 Subir tu CV</h2>
                <p class="step-subtitle">Sube tu CV en formato PDF para completar tu perfil</p>

                <div class="file-upload-area" id="fileUploadArea">
                    <div class="upload-icon">📄</div>
                    <div class="upload-text">Arrastra tu CV aquí o haz click para seleccionar</div>
                    <div class="upload-hint">Formato PDF, máximo 5MB</div>
                    <input type="file" id="cvFile" accept=".pdf" style="display: none;">
                </div>

                <div class="file-info" id="fileInfo">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong id="fileName">archivo.pdf</strong>
                            <div style="color: #718096; font-size: 0.9em;">
                                <span id="fileSize">2.3 MB</span> • 
                                <span style="color: #48bb78;">✓ Listo para subir</span>
                            </div>
                        </div>
                        <button type="button" onclick="removeFile()" style="background: none; border: none; color: #e53e3e; cursor: pointer; font-size: 1.2em;">×</button>
                    </div>
                </div>

                <!-- Resumen de datos -->
                <div class="summary-card">
                    <h3 style="margin-bottom: 20px; color: #2d3748;">📋 Resumen de tu Perfil</h3>
                    <div id="profileSummary">
                        <!-- Se genera dinámicamente -->
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="prevStep(3)">Anterior</button>
                    <button type="button" class="btn btn-primary" onclick="submitForm()" id="submitBtn">Enviar mi CV</button>
                </div>
            </div>

            <!-- Loading -->
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <h3>Enviando tu CV...</h3>
                <p>Por favor espera mientras procesamos tu información</p>
            </div>

            <!-- Mensaje de éxito -->
            <div class="success-message" id="successMessage">
                <div class="success-icon">🎉</div>
                <h2>¡CV Enviado Exitosamente!</h2>
                <p>Gracias por registrarte en MindMatch. Los reclutadores podrán ver tu perfil y te contactarán si hay oportunidades que coincidan con tu perfil.</p>
                <button class="btn btn-primary" onclick="resetForm()" style="margin-top: 20px;">Enviar otro CV</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let selectedSkills = [];
        let uploadedFile = null;

        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            setupFileUpload();
            setupSkillsInput();
        });

        // Configurar drag & drop para archivos
        function setupFileUpload() {
            const uploadArea = document.getElementById('fileUploadArea');
            const fileInput = document.getElementById('cvFile');

            uploadArea.addEventListener('click', () => fileInput.click());
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFile(files[0]);
                }
            });

            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleFile(e.target.files[0]);
                }
            });
        }

        // Manejar archivo subido
        function handleFile(file) {
            if (file.type !== 'application/pdf') {
                alert('Por favor sube solo archivos PDF');
                return;
            }
            if (file.size > 5 * 1024 * 1024) {
                alert('El archivo es muy grande. Máximo 5MB');
                return;
            }

            uploadedFile = file;
            document.getElementById('fileName').textContent = file.name;
            document.getElementById('fileSize').textContent = (file.size / 1024 / 1024).toFixed(2) + ' MB';
            document.getElementById('fileInfo').classList.add('show');
        }

        // Remover archivo
        function removeFile() {
            uploadedFile = null;
            document.getElementById('cvFile').value = '';
            document.getElementById('fileInfo').classList.remove('show');
        }

        // Configurar input de habilidades
        function setupSkillsInput() {
            const skillInput = document.getElementById('skillInput');
            skillInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && this.value.trim()) {
                    e.preventDefault();
                    addSkill(this.value.trim());
                    this.value = '';
                }
            });
        }

        // Agregar habilidad
        function addSkill(skill) {
            if (!selectedSkills.includes(skill)) {
                selectedSkills.push(skill);
                renderSkills();
            }
        }

        // Remover habilidad
        function removeSkill(skill) {
            selectedSkills = selectedSkills.filter(s => s !== skill);
            renderSkills();
        }

        // Renderizar habilidades
        function renderSkills() {
            const container = document.getElementById('skillsContainer');
            const input = document.getElementById('skillInput');
            
            container.innerHTML = '';
            
            selectedSkills.forEach(skill => {
                const tag = document.createElement('div');
                tag.className = 'skill-tag';
                tag.innerHTML = `
                    ${skill}
                    <span class="remove" onclick="removeSkill('${skill}')">&times;</span>
                `;
                container.appendChild(tag);
            });
            
            container.appendChild(input);
        }

        // Navegar entre pasos
        function nextStep(step) {
            if (validateStep(step)) {
                currentStep++;
                showStep(currentStep);
                updateProgress();
                if (currentStep === 3) {
                    generateSummary();
                }
            }
        }

        function prevStep(step) {
            currentStep--;
            showStep(currentStep);
            updateProgress();
        }

        // Mostrar paso
        function showStep(step) {
            document.querySelectorAll('.form-step').forEach(s => s.classList.remove('active'));
            document.getElementById(`step${step}`).classList.add('active');
        }

        // Actualizar barra de progreso
        function updateProgress() {
            const progressWidths = { 1: '33%', 2: '66%', 3: '100%' };
            document.querySelector('.progress-bar').style.setProperty('--progress-width', progressWidths[currentStep]);
            
            document.querySelectorAll('.step-circle').forEach((circle, index) => {
                circle.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    circle.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    circle.classList.add('active');
                }
            });
        }

        // Validar paso
        function validateStep(step) {
            let isValid = true;
            const requiredFields = {
                1: ['firstName', 'lastName', 'email', 'phone', 'location', 'position'],
                2: ['experience']
            };

            if (requiredFields[step]) {
                requiredFields[step].forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (!field.value.trim()) {
                        field.classList.add('error');
                        isValid = false;
                    } else {
                        field.classList.remove('error');
                    }
                });
            }

            if (step === 2 && selectedSkills.length === 0) {
                alert('Por favor agrega al menos una habilidad técnica');
                isValid = false;
            }

            if (!isValid) {
                alert('Por favor completa todos los campos obligatorios');
            }

            return isValid;
        }

        // Generar resumen
        function generateSummary() {
            const summary = document.getElementById('profileSummary');
            const data = collectFormData();
            
            summary.innerHTML = `
                <div class="summary-row">
                    <span class="summary-label">Nombre:</span>
                    <span class="summary-value">${data.firstName} ${data.lastName}</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Email:</span>
                    <span class="summary-value">${data.email}</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Posición:</span>
                    <span class="summary-value">${data.position}</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Experiencia:</span>
                    <span class="summary-value">${data.experience}</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Ubicación:</span>
                    <span class="summary-value">${data.location}</span>
                </div>
                <div class="summary-row">
                    <span class="summary-label">Habilidades:</span>
                    <span class="summary-value">${selectedSkills.join(', ')}</span>
                </div>
            `;
        }

        // Recopilar datos del formulario
        function collectFormData() {
            return {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                location: document.getElementById('location').value,
                position: document.getElementById('position').value,
                summary: document.getElementById('summary').value,
                experience: document.getElementById('experience').value,
                salary: document.getElementById('salary').value,
                skills: selectedSkills,
                education: document.getElementById('education').value,
                cvFile: uploadedFile
            };
        }

        // Enviar formulario
 // Enviar formulario (CORREGIDO)
async function submitForm() {
    if (!uploadedFile) {
        alert('Por favor sube tu CV en formato PDF');
        return;
    }

    // Mostrar loading
    document.getElementById('step3').style.display = 'none';
    document.getElementById('loading').classList.add('show');

    const formData = collectFormData();

    // Simular envío (aquí conectarías con tu backend)
    try {
        // Crear FormData para enviar archivo
        const submitData = new FormData();
        Object.keys(formData).forEach(key => {
            if (key === 'skills') {
                submitData.append(key, JSON.stringify(formData[key]));
            } else if (key === 'cvFile') {
                submitData.append('cv', formData[key]);
            } else {
                submitData.append(key, formData[key]);
            }
        });

        // Simulación de envío al servidor
        // En un proyecto real, aquí harías:
        // const response = await fetch('/api/upload-cv', {
        //     method: 'POST',
        //     body: submitData
        // });

        // Simular delay de servidor (CORREGIDO)
        await new Promise(resolve => setTimeout(resolve, 2000));

        // Ocultar loading y mostrar éxito
        document.getElementById('loading').classList.remove('show');
        document.getElementById('successMessage').classList.add('show');

        console.log('Datos enviados:', formData);
        
    } catch (error) {
        console.error('Error:', error);
        alert('Hubo un error al enviar tu CV. Por favor intenta nuevamente.');
        document.getElementById('loading').classList.remove('show');
        document.getElementById('step3').style.display = 'block';
    }
}

        // Resetear formulario
        function resetForm() {
            // Resetear variables
            currentStep = 1;
            selectedSkills = [];
            uploadedFile = null;

            // Limpiar formulario
            document.querySelectorAll('.form-input').forEach(input => {
                input.value = '';
                input.classList.remove('error');
            });

            // Resetear habilidades
            renderSkills();

            // Remover archivo
            removeFile();

            // Ocultar mensajes
            document.getElementById('successMessage').classList.remove('show');
            document.getElementById('loading').classList.remove('show');

            // Mostrar primer paso
            showStep(1);
            updateProgress();
        }

        // Validación de email en tiempo real
        document.getElementById('email').addEventListener('blur', function() {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (this.value && !emailRegex.test(this.value)) {
                this.classList.add('error');
                alert('Por favor ingresa un email válido');
            } else {
                this.classList.remove('error');
            }
        });

        // Validación de teléfono en tiempo real
        document.getElementById('phone').addEventListener('input', function() {
            // Permitir solo números, espacios, guiones y paréntesis
            this.value = this.value.replace(/[^0-9\s\-\(\)\+]/g, '');
        });

        // Autocompletado de ubicación (simulado)
        document.getElementById('location').addEventListener('input', function() {
            // En un proyecto real, aquí integrarías una API de geocodificación
            // como Google Places API o similar
        });

        // Guardar progreso en sessionStorage para persistencia
        function saveProgress() {
            const formData = collectFormData();
            sessionStorage.setItem('mindmatch_progress', JSON.stringify({
                currentStep,
                selectedSkills,
                formData
            }));
        }

        // Cargar progreso guardado
        function loadProgress() {
            const saved = sessionStorage.getItem('mindmatch_progress');
            if (saved) {
                const data = JSON.parse(saved);
                currentStep = data.currentStep;
                selectedSkills = data.selectedSkills || [];
                
                // Restaurar campos del formulario
                Object.keys(data.formData).forEach(key => {
                    const field = document.getElementById(key);
                    if (field && data.formData[key]) {
                        field.value = data.formData[key];
                    }
                });
                
                renderSkills();
                showStep(currentStep);
                updateProgress();
            }
        }

        // Guardar progreso en cada cambio
        document.addEventListener('input', saveProgress);
        document.addEventListener('change', saveProgress);

        // Preguntar antes de salir si hay datos sin guardar
        window.addEventListener('beforeunload', function(e) {
            if (currentStep > 1 || document.getElementById('firstName').value) {
                e.preventDefault();
                e.returnValue = '';
            }
        });

        // Accesibilidad: navegación con teclado
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.target.classList.contains('btn-primary')) {
                e.target.click();
            }
        });

        // Analytics simulado (en un proyecto real usarías Google Analytics, etc.)
        function trackEvent(action, category, label) {
            console.log(`Analytics: ${category} - ${action} - ${label}`);
            // gtag('event', action, {
            //     event_category: category,
            //     event_label: label
            // });
        }

        // Tracking de eventos importantes
        function nextStep(step) {
            if (validateStep(step)) {
                trackEvent('step_completed', 'form', `step_${step}`);
                currentStep++;
                showStep(currentStep);
                updateProgress();
                if (currentStep === 3) {
                    generateSummary();
                }
            }
        }

        // Mejorar UX con animaciones suaves
        function showStep(step) {
            const currentStepEl = document.querySelector('.form-step.active');
            const nextStepEl = document.getElementById(`step${step}`);
            
            if (currentStepEl) {
                currentStepEl.style.opacity = '0';
                setTimeout(() => {
                    currentStepEl.classList.remove('active');
                    nextStepEl.classList.add('active');
                    nextStepEl.style.opacity = '0';
                    setTimeout(() => {
                        nextStepEl.style.opacity = '1';
                    }, 50);
                }, 150);
            } else {
                nextStepEl.classList.add('active');
            }
        }

        // Cargar progreso al inicializar
        document.addEventListener('DOMContentLoaded', function() {
            setupFileUpload();
            setupSkillsInput();
            loadProgress();
        });
    </script>
</body>
</html>